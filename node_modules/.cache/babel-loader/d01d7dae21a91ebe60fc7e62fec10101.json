{"ast":null,"code":"var _jsxFileName = \"/Users/malavikasp/Desktop/Pupil-locator/eyeGazeSystem/src/components/webcamImg/WebcamImg.js\",\n    _s = $RefreshSig$();\n\n// Copyright 2023 MediaPipe & Malgorzata Pick\nimport React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport Webcam from \"react-webcam\";\nimport { FaceMesh, // FACEMESH_TESSELATION,\nFACEMESH_RIGHT_IRIS, FACEMESH_LEFT_IRIS // FACEMESH_FACE_OVAL,\n} from \"@mediapipe/face_mesh\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { drawConnectors } from \"@mediapipe/drawing_utils\";\nimport Info from \"../../components/info/Info\"; // import InfoIcon from \"../../components/infoIcon/InfoIcon\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst WebcamImg = () => {\n  _s();\n\n  // Global settings\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [imgSrc, setImgSrc] = useState(null);\n  const [PDValue, setPDValue] = useState(\"\");\n  const [PDResult, setPDResult] = useState(\"\");\n  const [averageValue, setAverageValue] = useState(0);\n  const [numbersList, setNumbersList] = useState([]);\n  const deviceWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n  let width = 640.0;\n  let height = 480.0;\n\n  if (deviceWidth < 670 && deviceWidth >= 510) {\n    width = 480.0;\n    height = 360.0;\n  }\n\n  if (deviceWidth < 510 && deviceWidth >= 390) {\n    width = 360.0;\n    height = 360.0;\n  }\n\n  if (deviceWidth < 390) {\n    width = 240.0;\n    height = 240.0;\n  }\n\n  const videoConstraints = {\n    width: width,\n    height: height,\n    facingMode: \"user\"\n  }; // Function to calculate distance between two points / pupils\n\n  const getDistance = (p1, p2) => {\n    return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2) + Math.pow(p1.z - p2.z, 2));\n  }; // Loading webcam and setting Face Mesh API when image source changes\n\n\n  useEffect(() => {\n    // Function to run canvas with video and Face Mesh when ready\n    const onResults = results => {\n      // Setting canvas - references and context\n      const canvasElement = canvasRef.current;\n      canvasElement.width = width;\n      canvasElement.height = height;\n      const canvasCtx = canvasElement.getContext(\"2d\");\n      canvasCtx.save();\n      canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n      canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height); // Loading Face Mesh landmarks for iris and getting coordinates for pupils\n\n      if (results.multiFaceLandmarks && results.multiFaceLandmarks[0]) {\n        let pupils = {\n          left: {\n            x: (results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].x + results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].x) / 2.0,\n            y: (results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].y + results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].y) / 2.0,\n            z: (results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].z + results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].z) / 2.0,\n            width: getDistance(results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]], results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]])\n          },\n          right: {\n            x: (results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].x + results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].x) / 2.0,\n            y: (results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].y + results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].y) / 2.0,\n            z: (results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].z + results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].z) / 2.0,\n            width: getDistance(results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]], results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]])\n          }\n        }; // Setting variables for calculation disance between pupils\n\n        let distance = getDistance(pupils.left, pupils.right);\n        let irisWidthInMM = 12.0;\n        let pupilWidth = Math.min(pupils.left.width, pupils.right.width);\n        let pd = irisWidthInMM / pupilWidth * distance; // Setting real-time pupillary distance\n\n        setPDValue(pd.toFixed(0)); // Drawing Face Mesh results of pupils on canvas\n\n        canvasCtx.fillStyle = \"#4379b8\"; // Left\n\n        canvasCtx.fillRect(results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].x * width - 2, results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].y * height - 2, 4, 4);\n        canvasCtx.fillRect(results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].x * width - 2, results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].y * height - 2, 4, 4);\n        canvasCtx.fillRect(results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[1][0]].x * width - 2, results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[1][0]].y * height - 2, 4, 4);\n        canvasCtx.fillRect(results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[3][0]].x * width - 2, results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[3][0]].y * height - 2, 4, 4);\n        canvasCtx.fillRect(pupils.left.x * width - 2, pupils.left.y * height - 2, 4, 4); // Right\n\n        canvasCtx.fillRect(results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].x * width - 2, results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].y * height - 2, 4, 4);\n        canvasCtx.fillRect(results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].x * width - 2, results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].y * height - 2, 4, 4);\n        canvasCtx.fillRect(results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[1][0]].x * width - 2, results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[1][0]].y * height - 2, 4, 4);\n        canvasCtx.fillRect(results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[3][0]].x * width - 2, results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[3][0]].y * height - 2, 4, 4);\n        canvasCtx.fillRect(pupils.right.x * width - 2, pupils.right.y * height - 2, 4, 4); // Drawing Face Mesh landmarks of iris on canvas (and face oval and tessellation if you want)\n\n        for (const landmarks of results.multiFaceLandmarks) {\n          // drawConnectors(canvasCtx, landmarks, FACEMESH_TESSELATION, {\n          //   color: \"#C0C0C070\",\n          //   lineWidth: 1,\n          // });\n          drawConnectors(canvasCtx, landmarks, FACEMESH_RIGHT_IRIS, {\n            color: \"#FF3030\",\n            lineWidth: 1\n          });\n          drawConnectors(canvasCtx, landmarks, FACEMESH_LEFT_IRIS, {\n            color: \"#FF3030\",\n            lineWidth: 1\n          }); // drawConnectors(canvasCtx, landmarks, FACEMESH_FACE_OVAL, {\n          //   color: \"#E0E0E0\",\n          // });\n        }\n      }\n\n      canvasCtx.restore();\n    }; // Starting new Face Mesh\n\n\n    const faceMesh = new FaceMesh({\n      locateFile: file => {\n        return `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`;\n      }\n    });\n    faceMesh.setOptions({\n      maxNumFaces: 1,\n      refineLandmarks: true,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5\n    });\n    faceMesh.onResults(onResults); // Starting new camera\n\n    const videoElement = webcamRef.current;\n\n    if (imgSrc === null && typeof videoElement !== \"undefined\" && videoElement !== null) {\n      const camera = new Camera(videoElement.video, {\n        onFrame: async () => {\n          await faceMesh.send({\n            image: videoElement.video\n          });\n        },\n        width: width,\n        height: height\n      });\n      camera.start();\n      document.querySelector(\".container-img\").style.display = \"none\";\n    }\n\n    return () => {};\n  }, [imgSrc, height, width, deviceWidth]);\n  useEffect(() => {}, [numbersList, PDResult]); // Function for hiding container with introduction and showing container with info\n\n  const showInfo = () => {\n    document.querySelector(\"#card-1\").style.display = \"none\";\n    document.querySelector(\"#card-2\").style.display = \"flex\";\n    document.querySelector(\".container-display\").style.display = \"none\";\n    document.querySelector(\".container-img\").style.display = \"none\";\n  }; // Function for hiding container with info and showing results with video\n\n\n  const openApp = () => {\n    document.querySelector(\"#card-2\").style.display = \"none\";\n    document.querySelector(\".container-display\").style.display = \"flex\";\n  }; // Function to capture image from canvas with Face Mesh and hide video section\n\n\n  const capturePhoto = () => {\n    document.querySelector(\".container-img\").style.display = \"flex\";\n    const canvas = document.querySelector(\"#output-canvas\");\n    const data = canvas.toDataURL(\"image/png\");\n    setImgSrc(data);\n    document.querySelector(\".container-display\").style.display = \"none\";\n    setPDResult(PDValue);\n    const tempNumbers = [...numbersList];\n    tempNumbers.push(+PDValue);\n    console.log(\"All numbers: \");\n    console.log(tempNumbers);\n    setNumbersList(tempNumbers);\n    let average = tempNumbers.reduce((a, b) => a + b, 0) / tempNumbers.length;\n    console.log(\"Average: \");\n    console.log(average);\n    setAverageValue(tempNumbers.length > 0 ? average.toFixed(0) : 0);\n  }; // Function to reset image source and showing back video section\n\n\n  const resetPhoto = () => {\n    setImgSrc(null);\n    document.querySelector(\".container-display\").style.display = \"flex\";\n  }; // DOM elements which shows depending on what's happening in app\n\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-app\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-card\",\n        id: \"card-2\",\n        style: {\n          display: \"none\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"info-title\",\n            children: \"Instruction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"open-app-btn\",\n          onClick: ev => {\n            openApp();\n            ev.preventDefault();\n          },\n          children: \"Measure PD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-display\",\n        style: {\n          display: \"none\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-video\",\n          children: [/*#__PURE__*/_jsxDEV(Webcam, {\n            ref: webcamRef,\n            videoConstraints: videoConstraints,\n            width: width,\n            height: height,\n            audio: false,\n            imageSmoothing: true,\n            screenshotFormat: \"image/jpeg\",\n            id: \"input-video\",\n            className: \"result\",\n            style: {\n              marginLeft: \"auto\",\n              marginRight: \"auto\",\n              left: 0,\n              right: 0,\n              textAlign: \"center\",\n              zindex: 9,\n              display: \"none\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            id: \"output-canvas\",\n            className: \"result\",\n            style: {\n              marginLeft: \"auto\",\n              marginRight: \"auto\",\n              left: 0,\n              right: 0,\n              textAlign: \"center\",\n              zindex: 9,\n              width: width,\n              height: height\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"values\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"PD: \" + PDValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"capture-btn\",\n              onClick: ev => {\n                capturePhoto();\n                ev.preventDefault();\n              },\n              children: \"Take picture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Average: \" + averageValue\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-img\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: imgSrc,\n          className: \"result\",\n          id: \"photo\",\n          alt: \"screenshot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"values\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"PD: \" + PDResult\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"retake-btn\",\n            onClick: ev => {\n              resetPhoto();\n              ev.preventDefault();\n            },\n            children: \"Retake\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Average: \" + averageValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WebcamImg, \"26c8RE8UYiWLgR93WelufGjk8Ls=\");\n\n_c = WebcamImg;\nexport default WebcamImg;\n\nvar _c;\n\n$RefreshReg$(_c, \"WebcamImg\");","map":{"version":3,"names":["React","Fragment","useEffect","useRef","useState","Webcam","FaceMesh","FACEMESH_RIGHT_IRIS","FACEMESH_LEFT_IRIS","Camera","drawConnectors","Info","WebcamImg","webcamRef","canvasRef","imgSrc","setImgSrc","PDValue","setPDValue","PDResult","setPDResult","averageValue","setAverageValue","numbersList","setNumbersList","deviceWidth","window","innerWidth","document","documentElement","clientWidth","body","width","height","videoConstraints","facingMode","getDistance","p1","p2","Math","sqrt","pow","x","y","z","onResults","results","canvasElement","current","canvasCtx","getContext","save","clearRect","drawImage","image","multiFaceLandmarks","pupils","left","right","distance","irisWidthInMM","pupilWidth","min","pd","toFixed","fillStyle","fillRect","landmarks","color","lineWidth","restore","faceMesh","locateFile","file","setOptions","maxNumFaces","refineLandmarks","minDetectionConfidence","minTrackingConfidence","videoElement","camera","video","onFrame","send","start","querySelector","style","display","showInfo","openApp","capturePhoto","canvas","data","toDataURL","tempNumbers","push","console","log","average","reduce","a","b","length","resetPhoto","ev","preventDefault","marginLeft","marginRight","textAlign","zindex"],"sources":["/Users/malavikasp/Desktop/Pupil-locator/eyeGazeSystem/src/components/webcamImg/WebcamImg.js"],"sourcesContent":["// Copyright 2023 MediaPipe & Malgorzata Pick\nimport React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport Webcam from \"react-webcam\";\nimport {\n  FaceMesh,\n  // FACEMESH_TESSELATION,\n  FACEMESH_RIGHT_IRIS,\n  FACEMESH_LEFT_IRIS,\n  // FACEMESH_FACE_OVAL,\n} from \"@mediapipe/face_mesh\";\nimport { Camera } from \"@mediapipe/camera_utils\";\nimport { drawConnectors } from \"@mediapipe/drawing_utils\";\nimport Info from \"../../components/info/Info\";\n// import InfoIcon from \"../../components/infoIcon/InfoIcon\";\n\nconst WebcamImg = () => {\n  // Global settings\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [imgSrc, setImgSrc] = useState(null);\n  const [PDValue, setPDValue] = useState(\"\");\n  const [PDResult, setPDResult] = useState(\"\");\n  const [averageValue, setAverageValue] = useState(0);\n  const [numbersList, setNumbersList] = useState([]);\n  const deviceWidth =\n    window.innerWidth ||\n    document.documentElement.clientWidth ||\n    document.body.clientWidth;\n\n  let width = 640.0;\n  let height = 480.0;\n\n  if (deviceWidth < 670 && deviceWidth >= 510) {\n    width = 480.0;\n    height = 360.0;\n  }\n  if (deviceWidth < 510 && deviceWidth >= 390) {\n    width = 360.0;\n    height = 360.0;\n  }\n  if (deviceWidth < 390) {\n    width = 240.0;\n    height = 240.0;\n  }\n\n  const videoConstraints = {\n    width: width,\n    height: height,\n    facingMode: \"user\",\n  };\n\n  // Function to calculate distance between two points / pupils\n  const getDistance = (p1, p2) => {\n    return Math.sqrt(\n      Math.pow(p1.x - p2.x, 2) +\n        Math.pow(p1.y - p2.y, 2) +\n        Math.pow(p1.z - p2.z, 2)\n    );\n  };\n\n  // Loading webcam and setting Face Mesh API when image source changes\n  useEffect(() => {\n    // Function to run canvas with video and Face Mesh when ready\n    const onResults = (results) => {\n      // Setting canvas - references and context\n      const canvasElement = canvasRef.current;\n      canvasElement.width = width;\n      canvasElement.height = height;\n      const canvasCtx = canvasElement.getContext(\"2d\");\n      canvasCtx.save();\n      canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);\n      canvasCtx.drawImage(\n        results.image,\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      // Loading Face Mesh landmarks for iris and getting coordinates for pupils\n      if (results.multiFaceLandmarks && results.multiFaceLandmarks[0]) {\n        let pupils = {\n          left: {\n            x:\n              (results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].x +\n                results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].x) /\n              2.0,\n            y:\n              (results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].y +\n                results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].y) /\n              2.0,\n            z:\n              (results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].z +\n                results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].z) /\n              2.0,\n            width: getDistance(\n              results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]],\n              results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]]\n            ),\n          },\n          right: {\n            x:\n              (results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].x +\n                results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].x) /\n              2.0,\n            y:\n              (results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].y +\n                results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].y) /\n              2.0,\n            z:\n              (results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].z +\n                results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].z) /\n              2.0,\n            width: getDistance(\n              results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]],\n              results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]]\n            ),\n          },\n        };\n\n        // Setting variables for calculation disance between pupils\n        let distance = getDistance(pupils.left, pupils.right);\n        let irisWidthInMM = 12.0;\n        let pupilWidth = Math.min(pupils.left.width, pupils.right.width);\n        let pd = (irisWidthInMM / pupilWidth) * distance;\n\n        // Setting real-time pupillary distance\n        setPDValue(pd.toFixed(0));\n\n        // Drawing Face Mesh results of pupils on canvas\n        canvasCtx.fillStyle = \"#4379b8\";\n        // Left\n        canvasCtx.fillRect(\n          results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].x * width - 2,\n          results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[2][0]].y * height -\n            2,\n          4,\n          4\n        );\n        canvasCtx.fillRect(\n          results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].x * width - 2,\n          results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[0][0]].y * height -\n            2,\n          4,\n          4\n        );\n        canvasCtx.fillRect(\n          results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[1][0]].x * width - 2,\n          results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[1][0]].y * height -\n            2,\n          4,\n          4\n        );\n        canvasCtx.fillRect(\n          results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[3][0]].x * width - 2,\n          results.multiFaceLandmarks[0][FACEMESH_LEFT_IRIS[3][0]].y * height -\n            2,\n          4,\n          4\n        );\n        canvasCtx.fillRect(\n          pupils.left.x * width - 2,\n          pupils.left.y * height - 2,\n          4,\n          4\n        );\n        // Right\n        canvasCtx.fillRect(\n          results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].x * width -\n            2,\n          results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[2][0]].y * height -\n            2,\n          4,\n          4\n        );\n        canvasCtx.fillRect(\n          results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].x * width -\n            2,\n          results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[0][0]].y * height -\n            2,\n          4,\n          4\n        );\n        canvasCtx.fillRect(\n          results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[1][0]].x * width -\n            2,\n          results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[1][0]].y * height -\n            2,\n          4,\n          4\n        );\n        canvasCtx.fillRect(\n          results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[3][0]].x * width -\n            2,\n          results.multiFaceLandmarks[0][FACEMESH_RIGHT_IRIS[3][0]].y * height -\n            2,\n          4,\n          4\n        );\n        canvasCtx.fillRect(\n          pupils.right.x * width - 2,\n          pupils.right.y * height - 2,\n          4,\n          4\n        );\n\n        // Drawing Face Mesh landmarks of iris on canvas (and face oval and tessellation if you want)\n        for (const landmarks of results.multiFaceLandmarks) {\n          // drawConnectors(canvasCtx, landmarks, FACEMESH_TESSELATION, {\n          //   color: \"#C0C0C070\",\n          //   lineWidth: 1,\n          // });\n          drawConnectors(canvasCtx, landmarks, FACEMESH_RIGHT_IRIS, {\n            color: \"#FF3030\",\n            lineWidth: 1,\n          });\n          drawConnectors(canvasCtx, landmarks, FACEMESH_LEFT_IRIS, {\n            color: \"#FF3030\",\n            lineWidth: 1,\n          });\n          // drawConnectors(canvasCtx, landmarks, FACEMESH_FACE_OVAL, {\n          //   color: \"#E0E0E0\",\n          // });\n        }\n      }\n      canvasCtx.restore();\n    };\n\n    // Starting new Face Mesh\n    const faceMesh = new FaceMesh({\n      locateFile: (file) => {\n        return `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`;\n      },\n    });\n    faceMesh.setOptions({\n      maxNumFaces: 1,\n      refineLandmarks: true,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.5,\n    });\n    faceMesh.onResults(onResults);\n\n    // Starting new camera\n    const videoElement = webcamRef.current;\n    if (\n      imgSrc === null &&\n      typeof videoElement !== \"undefined\" &&\n      videoElement !== null\n    ) {\n      const camera = new Camera(videoElement.video, {\n        onFrame: async () => {\n          await faceMesh.send({ image: videoElement.video });\n        },\n        width: width,\n        height: height,\n      });\n      camera.start();\n      document.querySelector(\".container-img\").style.display = \"none\";\n    }\n    return () => {};\n  }, [imgSrc, height, width, deviceWidth]);\n\n  useEffect(() => {}, [numbersList, PDResult]);\n\n  // Function for hiding container with introduction and showing container with info\n  const showInfo = () => {\n    document.querySelector(\"#card-1\").style.display = \"none\";\n    document.querySelector(\"#card-2\").style.display = \"flex\";\n    document.querySelector(\".container-display\").style.display = \"none\";\n    document.querySelector(\".container-img\").style.display = \"none\";\n  };\n\n  // Function for hiding container with info and showing results with video\n  const openApp = () => {\n    document.querySelector(\"#card-2\").style.display = \"none\";\n    document.querySelector(\".container-display\").style.display = \"flex\";\n  };\n\n  // Function to capture image from canvas with Face Mesh and hide video section\n  const capturePhoto = () => {\n    document.querySelector(\".container-img\").style.display = \"flex\";\n    const canvas = document.querySelector(\"#output-canvas\");\n    const data = canvas.toDataURL(\"image/png\");\n    setImgSrc(data);\n    document.querySelector(\".container-display\").style.display = \"none\";\n    setPDResult(PDValue);\n    const tempNumbers = [...numbersList];\n    tempNumbers.push(+PDValue);\n    console.log(\"All numbers: \");\n    console.log(tempNumbers);\n    setNumbersList(tempNumbers);\n    let average = tempNumbers.reduce((a, b) => a + b, 0) / tempNumbers.length;\n    console.log(\"Average: \");\n    console.log(average);\n    setAverageValue(tempNumbers.length > 0 ? average.toFixed(0) : 0);\n  };\n\n  // Function to reset image source and showing back video section\n  const resetPhoto = () => {\n    setImgSrc(null);\n    document.querySelector(\".container-display\").style.display = \"flex\";\n  };\n\n  // DOM elements which shows depending on what's happening in app\n  return (\n    <Fragment>\n      <div className=\"container-app\">\n\n        <div className=\"container-card\" id=\"card-2\" style={{ display: \"none\" }}>\n          <div className=\"container-info\">\n            <h2 className=\"info-title\">Instruction</h2>\n            <Info />\n          </div>\n          <button\n            id=\"open-app-btn\"\n            onClick={(ev) => {\n              openApp();\n              ev.preventDefault();\n            }}\n          >\n            Measure PD\n          </button>\n        </div>\n        <div className=\"container-display\" style={{ display: \"none\" }}>\n          <div className=\"container-video\">\n            <Webcam\n              ref={webcamRef}\n              videoConstraints={videoConstraints}\n              width={width}\n              height={height}\n              audio={false}\n              imageSmoothing={true}\n              screenshotFormat=\"image/jpeg\"\n              id=\"input-video\"\n              className=\"result\"\n              style={{\n                marginLeft: \"auto\",\n                marginRight: \"auto\",\n                left: 0,\n                right: 0,\n                textAlign: \"center\",\n                zindex: 9,\n                display: \"none\",\n              }}\n            />{\" \"}\n            <canvas\n              ref={canvasRef}\n              id=\"output-canvas\"\n              className=\"result\"\n              style={{\n                marginLeft: \"auto\",\n                marginRight: \"auto\",\n                left: 0,\n                right: 0,\n                textAlign: \"center\",\n                zindex: 9,\n                width: width,\n                height: height,\n              }}\n            ></canvas>\n            <div className=\"values\">\n              <p>{\"PD: \" + PDValue}</p>\n              <button\n                id=\"capture-btn\"\n                onClick={(ev) => {\n                  capturePhoto();\n                  ev.preventDefault();\n                }}\n              >\n                Take picture\n              </button>\n              <p>{\"Average: \" + averageValue}</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"container-img\">\n          <img src={imgSrc} className=\"result\" id=\"photo\" alt=\"screenshot\" />\n          <div className=\"values\">\n            <p>{\"PD: \" + PDResult}</p>\n            <button\n              id=\"retake-btn\"\n              onClick={(ev) => {\n                resetPhoto();\n                ev.preventDefault();\n              }}\n            >\n              Retake\n            </button>\n            <p>{\"Average: \" + averageValue}</p>\n          </div>\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default WebcamImg;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}